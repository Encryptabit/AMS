---
phase: 01-discovery
plan: 02
type: execute
---

<objective>
Analyze existing call graphs in D:/Notes and identify coverage gaps.

Purpose: Understand what method-level relationships are already documented and what's missing.
Output: Call graph coverage report showing what's documented, what's missing, and key insights from existing graphs.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-discovery/01-01-SUMMARY.md

**Existing assets:**
- 137 markdown files in D:/Notes with file-level call graphs
- These cover most of the codebase but may be incomplete

**Prior decisions:**
- Use D:/Notes as foundation (don't regenerate from scratch)
- FFmpeg P/Invoke code needs manual documentation (separate plan 01-03)

**From Plan 01-01:**
- FILE-INVENTORY.md lists all ~277 C# files
- PROJECT-STATUS.md shows which projects are active
</context>

<tasks>

<task type="auto">
  <name>Task 1: Inventory existing call graphs</name>
  <files>.planning/phases/01-discovery/CALLGRAPH-INVENTORY.md</files>
  <action>
    1. List all 137 .md files in D:/Notes
    2. Map each to corresponding source file in AMS codebase
    3. Categorize by project (Ams.Core, Ams.Cli, etc.)
    4. Note any graphs that don't have matching source files (orphaned docs)

    Create CALLGRAPH-INVENTORY.md with:
    - Table: Graph File | Source File | Project | Status (current/orphaned/unknown)
    - Count: How many graphs per project
  </action>
  <verify>CALLGRAPH-INVENTORY.md exists with all 137 files mapped</verify>
  <done>Every existing call graph mapped to source file or marked orphaned</done>
</task>

<task type="auto">
  <name>Task 2: Identify coverage gaps</name>
  <files>.planning/phases/01-discovery/CALLGRAPH-GAPS.md</files>
  <action>
    Compare FILE-INVENTORY.md against CALLGRAPH-INVENTORY.md:

    1. For each C# file in FILE-INVENTORY.md, check if call graph exists in D:/Notes
    2. Mark as: Covered | Missing | N/A (interfaces, models, simple DTOs)
    3. Prioritize gaps by project importance (Ams.Core > Ams.Cli > others)

    Create CALLGRAPH-GAPS.md with:
    - Table: File | Project | Graph Status | Priority
    - Summary: X files covered, Y files missing, Z files N/A
    - Gap analysis: Which critical files lack call graphs?
  </action>
  <verify>CALLGRAPH-GAPS.md exists with complete coverage analysis</verify>
  <done>Every C# file has coverage status; gaps prioritized</done>
</task>

<task type="auto">
  <name>Task 3: Extract key insights from existing graphs</name>
  <files>.planning/phases/01-discovery/CALLGRAPH-INSIGHTS.md</files>
  <action>
    Review existing call graphs to extract architectural insights:

    1. Read 10-15 key call graphs (PipelineService, AlignmentService, MfaWorkflow, AsrProcessor, etc.)
    2. Identify: Entry points, heavily-connected files, isolated components
    3. Note any circular dependencies or concerning patterns
    4. Flag files that appear orphaned (nothing calls them)

    Create CALLGRAPH-INSIGHTS.md with:
    - Key entry points identified
    - High-connectivity files (many callers/callees)
    - Potential dead code candidates (no callers)
    - Architectural observations
  </action>
  <verify>CALLGRAPH-INSIGHTS.md exists with architectural observations</verify>
  <done>Key architectural patterns documented from call graph review</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] CALLGRAPH-INVENTORY.md exists with 137 graphs mapped
- [ ] CALLGRAPH-GAPS.md exists with coverage analysis
- [ ] CALLGRAPH-INSIGHTS.md exists with architectural observations
- [ ] Gaps are prioritized by importance
- [ ] Key entry points and patterns identified
</verification>

<success_criteria>

- All 3 tasks completed
- All verification checks pass
- Clear picture of what call graph coverage exists
- Architectural patterns visible from graph analysis
</success_criteria>

<output>
After completion, create `.planning/phases/01-discovery/01-02-SUMMARY.md`:

# Phase 1 Plan 2: Call Graph Analysis Summary

**[Substantive one-liner about coverage findings]**

## Accomplishments

- [Coverage stats: X covered, Y missing]
- [Key architectural findings]
- [Entry points identified]

## Files Created

- `.planning/phases/01-discovery/CALLGRAPH-INVENTORY.md` - Existing graphs mapped
- `.planning/phases/01-discovery/CALLGRAPH-GAPS.md` - Coverage gap analysis
- `.planning/phases/01-discovery/CALLGRAPH-INSIGHTS.md` - Architectural insights

## Decisions Made

[Any decisions about what gaps to prioritize]

## Issues Encountered

[Problems found, or "None"]

## Next Step

Ready for 01-03-PLAN.md (FFmpeg/P/Invoke Documentation)
</output>
